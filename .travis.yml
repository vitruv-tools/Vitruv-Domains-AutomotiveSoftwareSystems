language: java
sudo: required
jdk:
  - oraclejdk8
cache:
  directories:
   - $HOME/.m2

notifications:
  email:
    recipients:
      - vitruv-build@ira.uni-karlsruhe.de
      
before_install:
    - git clone --depth 1 https://github.com/kit-sdq/BuildUtilities.git /tmp/BuildUtilities
    - . /tmp/BuildUtilities/travis-ci/installMaven.sh
    - "echo \"export MAVEN_OPTS='-Dmaven.repo.local=$HOME/.m2/repository -Xmx2g'\" > ~/.mavenrc"
install: true

script: mvn clean verify

after_success:
- . /tmp/BuildUtilities/travis-ci/deploy.sh domains releng/tools.vitruv.domains.updatesite.aggregated final vitruv-tools updatesite